<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta name="LastChangedDate" content="$LastChangedDate: 2009-08-19 19:34:17 +0200 (Mi, 19 Aug 2009) $" />
  <meta name="Revision" content="$Revision: 709 $" />
  <meta name="HeadURL" content="$HeadURL: https://eclemma.svn.sourceforge.net/svnroot/eclemma/eclemma/trunk/com.mountainminds.eclemma.doc/pages/launching.html $" />
  <link rel="stylesheet" href="../book.css" charset="ISO-8859-1" type="text/css" />
  <title>Launching in Coverage Mode</title>
</head>

<body>

<h2>Launching in Coverage Mode</h2>

<p>
  Eclipse allows running Java programs directly from the workbench. Programs
  can be launched in different so called <i>launch modes</i>. In a standard
  Eclipse installation you can launch your programs either in <i>Run</i>
  or in <i>Debug</i> mode. EclEmma adds a new launch mode <i>Coverage</i> which
  is available from the <i>Run</i> menu and the toolbar:
</p>

<p>
  <img src="images/launchtoolbar.gif" alt="Launching Toolbar" width="112" height="27" />
</p>

<p>
  <b>Note:</b> If the <i>Coverage</i> drop-down toolbar button is not visible
  in your current workbench perspective, open the <i>Customize Perspective...</i>
  dialog and enable the <i>Coverage</i> command group on the <i>Commands</i> tab.
</p>

<p>
  Currently the following launch types are supported:
</p>

<ul>
  <li>Local Java application</li>
  <li>Eclipse/RCP application</li>
  <li>Equinox OSGi framework</li>
  <li>JUnit test</li>
  <li>TestNG test</li>
  <li>JUnit plug-in test</li>
  <li>JUnit RAP test</li>
  <li>SWTBot test</li>
</ul>

<p>
  Existing launch configurations can be launched directly in <i>Coverage</i>
  mode using default settings. As with the <i>Run</i> and <i>Debug</i> mode
  you might also select a Java element and launch it directly from the
  <i>Coverage As</i> context menu. If required some settings can be modified
  in the coverage launch dialog:
</p>

<p>
  <img src="images/launchdialog.png" alt="Launch Dialog" width="586" height="457" />
</p>

<p>
  In the <i>Coverage</i> tab the Java class path entries can be selected which
  should be prepared for coverage analysis . EMMA modifies these classes in a
  process called <i>instrumentation</i>. Instrumentation is possible for source
  based classes as well as for binary libraries. At least one entry must be
  selected to run an application in <i>Coverage</i> mode. The rules which class
  path entries are selected by default can be adjusted in the
  <a href="preferences.html">code coverage preferences</a>.   
</p>

<p>
  <b>Note:</b> Source folders with the same output location can not be selected
  separately. If you want to select them individually please specify a different
  output location for each source folder. This can be done in the Java project
  settings.
</p>

<h3>Coverage Data Collection</h3>

<p>
  Coverage data is collected and presented automatically <i>after</i> the
  application has terminated on its own. If the Java VM is killed externally,
  e.g. with the Eclipse <i>Terminate</i> action, coverage results can not be
  shown.
</p>

<h3>In-place Instrumentation</h3>

<p>
  EclEmma tries not to touch your project's content. Therefore class files are
  normally instrumented outside your project in a temporary folder. Optionally
  class files can be instrumented in-place by selecting the corresponding check
  box on the <i>Coverage</i> tab.
</p>

<table border="1" cellspacing="0" cellpadding="4">
  <tr>
    <td></td>
    <td><b>Outside Instrumentation</b></td>
    <td><b>In-place Instrumentation</b></td>
  </tr>
  <tr>
    <td><b>Instrumentation</b></td>
    <td>Instrumented classes will be saved in a temporary folder outside your project.</td>
    <td>The compiled classes will be instrumented directly in your project.</td>
  </tr>
  <tr>
    <td><b>Runtime Classpath</b></td>
    <td>The classpath will be modified to include the locations of the instrumented classes.</td>
    <td>The classpath will not be modified.</td>
  </tr>
  <tr>
    <td><b>Binary Libraries</b></td>
    <td>Binary libraries can also be analysed for coverage.</td>
    <td>Binary libraries can not be analysed, as this would permanently modify them.</td>
  </tr>
  <tr>
    <td><b>Supported Launch Types</b></td>
    <td>Local Java application, JUnit test, TestNG test</td>
    <td>Local Java application, Eclipse/RCP application, Equinox OSGi framework,
        JUnit test, TestNG test, JUnit plug-in test, JUnit RAP test, SWTBot test</td>
  </tr>
</table>

<p>
  Programs that do not accept a Java classpath, i.e. using their own class
  loading mechanisms, require in-place instrumentation.
</p>

<p>
  <b>Warning:</b> In-place instrumentation will modify your class files.
  Instrumented class files can not be used with launch modes other than
  <i>Coverage</i>. Therefore a clean build is required after a coverage launch
  with in-place instrumentation.
</p>

</body>
</html>